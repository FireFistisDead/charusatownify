<%- include('partials/header', { user: user }) %>

  <div class="container mt-4">
    <% if (user) { %>
      <h2 class="text-center mb-4">WELCOME, <%= (user.name || '').toUpperCase() %></h2>
    <% } else { %>
      <h2 class="text-center mb-4">WELCOME to Charusat Ownify</h2>
    <% } %>

    <!-- Overview Section -->
    <div class="text-center mb-5">
      <p class="lead">
        This is Charusat Ownify â€“ a portal to report and find lost items easily within your campus.
      </p>
    </div>

    <!-- Recent Lost Items -->
    <h3 class="mb-3" style="color: rgb(0, 102, 179);">Recent Lost Items</h3>
    <div class="row g-3 mb-5">
      <% if (lostItems.length === 0) { %>
        <p>No lost items reported yet.</p>
      <% } else { %>
        <% lostItems.forEach(item => { %>
          <div class="col-md-4">
            <div class="card shadow-sm h-100">
              <% if (item.image) { %>
                <div class="myntra-thumb mb-2">
                  <img src="<%= item.image %>" alt="Item image">
                </div>
              <% } %>
              <div class="card-body">
                <h5 class="card-title"><%= item.title %></h5>
                <p class="card-text"><%= item.location %> | <%= new Date(item.dateLost).toLocaleDateString() %></p>
                <% if (item.reportedBy && item.reportedBy.name) { %>
                  <p class="card-text"><small class="text-muted">Reported by: <%= item.reportedBy.name %></small></p>
                <% } %>
                <a href="/lost/<%= item._id %>" class="btn btn-primary btn-sm">View Details</a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>

    <!-- Recent Found Items -->
    <h3 class="mb-3" style="color: rgb(0, 102, 179);">Recent Found Items</h3>
    <div class="row g-3">
      <% if (foundItems.length === 0) { %>
        <p>No found items reported yet.</p>
      <% } else { %>
        <% foundItems.forEach(item => { %>
          <div class="col-md-4">
            <div class="card shadow-sm h-100">
              <% if (item.image) { %>
                <div class="myntra-thumb mb-2">
                  <img src="<%= item.image %>" alt="Item image">
                </div>
              <% } %>
              <div class="card-body">
                <h5 class="card-title"><%= item.title %></h5>
                <p class="card-text"><%= item.location %> | <%= new Date(item.dateFound).toLocaleDateString() %></p>
                <% if (item.reportedBy && item.reportedBy.name) { %>
                  <p class="card-text"><small class="text-muted">Reported by: <%= item.reportedBy.name %></small></p>
                <% } %>
                <a href="/found/<%= item._id %>" class="btn btn-primary btn-sm">View Details</a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>
  </div>

<%- include('partials/footer') %>
